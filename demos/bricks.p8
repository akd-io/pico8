pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- Bricks
-- by akd

--[[
- Try implementing a simple top-down scene of a brick floor but with very
  realistic lighting.
- Have a single light source moving around in a circle, lighting up the bricks.
- Have ~6 different base brick textures.
- Shade pixels based on distance to light source.
- Add shadows on backsides of stones. Add highlights on frontside of stones.
- Consider letting the light source light up the gap between the stones when
  exactly on top.
- Stone shadows and highlights should be smoothly implemented, that is, glide
  smoothly around the edge of the stone, not cycle between sprites in a jittery
  fashion.
- Given the large sprite space, maybe sprites for be good for shadows and
  highlights after all.
- - There might be an opportunity to utilize a normal map here.
- For a the 1px shadow/highlight outline. One could probably use a sprite that
  uses all 15 colors to for a rect. Shadow and highlight can then be drawn
  individually by mapping subsets of the color pallette to white and black
  using pal() and hide all irrelevant angles with palt().
- For a full normal map implementation, it might be useful to imagine the 4x4
  pico8 color palette tilted sideways 45deg. This way you'll have 2 magnitudes
  for N, S, E, E, each. The remaining 8 colors will be at slight off angles;
  about 30deg and 60deg.
- https://www.youtube.com/watch?v=gUkY8ZoRfuQ
- https://www.youtube.com/watch?v=e7fvFbyelb4
- On second thought, you probably want a color at the center to represent
  overhead no matter what, so idk. With a center color, a 3x3 grid is lige til
  h√∏jrebenet to start out with, but then you have odd 7 colors left. What
- Pick a pallette to ensure a lot of dark colors.
- A good pallette might alleviate the need for a lot of dithering.
- Together with pal(TBL)?
- There might be an opportunity to use the grayscale pallette talked about else
  in these notes.
- Read the blog post here. That game does the gradient lighting brilliantly,
  but there are no normal maps; directional highlights/shadows.
  https://hackernoon.com/pico-8-lighting-part-1-thin-dark-line-8ea15d21fed7
- Demo cart:
  https://www.lexaloffle.com/bbs/?tid=28785&ref=hackernoon.com#playing
- Note: Dank Tombs article mentions spr() not being able to read from the
  screen buffer. I'm pretty sure that's possible now. Maybe that can speed up
  the shader.
- I also think i recall pico8 getting an update making it easy to draw using a
  circular clipping. Maybe even a donut. That should further trivialize the
  problem in today's pico version.
- Interesting clipping stuff here: https://www.lexaloffle.com/bbs/?tid=46286
- superceded by inverted draws here: https://www.lexaloffle.com/bbs/?tid=140421
]]

__gfx__
0000000051555150dddddd5051555155d5155150dddddddddddddd50000000000000000000000000000000000000000000000000000000000000000000000000
00000000d55d55d0d55d5510d55d55d5555d5510d55d5d5d155d5510000000000000000000000000000000000000000000000000000000000000000000000000
000000005d515150511111105d5151555155d150ddd5d5d5d515d110000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000005555555155d15550d5d1555151d5d510000000000000000000000000000000000000000000000000000000000000000000000000
0000000051505155dd50ddddd1555155d5555550dd5d5d1d5d515110000000000000000000000000000000000000000000000000000000000000000000000000
0000000055d0d51d5510d51d55d5d5155515d510d515d15515151510000000000000000000000000000000000000000000000000000000000000000000000000
00000000515055d111105111515555d5515515505111111111111110000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000d515515051555155dddddd50dddddddd000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000555d5510d55d55d5155d5510d55d5d5d000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000005155d1505d515155d515d110ddd5d5d5000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000055d155505555555151d5d510d5d15551000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000d5555550d15551555d515110dd5d5d1d000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000005515d51055d5d51515151510d515d155000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000051551550515555d51111111051111111000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0101010102020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010102020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010102020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010102020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0304030405060506000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1314131415161516000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0304030405060506000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1314131415161516000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
